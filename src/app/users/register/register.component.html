<div class="my-2">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-7 col-lg-9 col-md-11 col-sm-12">
                <div class="alert alert-success" style="font-size: 18px" *ngIf="isRegistred | async">
                    <h2>You are registred!</h2><br /><br />
                    Username : <b>{{ form.controls['username'].value }}</b><br />
                    Password : <b>{{ form.controls['passwordZone'].value.password }}</b><br />
                </div>
                <mat-card *ngIf="!(isRegistred | async)">
                    <div style="text-align:center; margin:auto">
                        <div class="avatar2" style="background:#008B8B; height: 60px; width: 60px; margin-bottom: 10px">
                            <div class="avatar_letters">
                                <mat-icon style="font-size: 40px; margin-right:10px">edit</mat-icon>
                            </div>
                        </div>
                        <h1>Register new User</h1>
                        <div style="text-align: center" *ngIf="errorMessage | async as error">
                            <div class="alert alert-danger">
                                {{ error }}
                            </div>
                        </div>
                        <form [formGroup]="form" (ngSubmit)="form.valid && handleSubmit(form)">
                            <div class="fluid-container">
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Username</mat-label>
                                            <input matInput name="username" formControlName="username" />
                                            <mat-hint *ngIf="form.get('username').hasError('required')" style="color:red">* This field is required</mat-hint>
                                            <mat-hint *ngIf="form.get('username').hasError('pattern')" style="color:red">* Please enter a valid username</mat-hint>
                                            <mat-error *ngIf="form.get('username').hasError('minMaxError')">
                                                * The length must be between {{ form.get('username')?.errors?.minLength }} and {{ form.get('username')?.errors?.maxLength }}
                                            </mat-error>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row" formGroupName="passwordZone">
                                    <div class="col-lg-6 col-md-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Password</mat-label>
                                            <input matInput name="password" type="password" formControlName="password" />
											<mat-hint *ngIf="form.get('passwordZone.password').hasError('minlength')" style="color:red">* Password min 6 caracters.</mat-hint>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-6 col-md-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Reapet password</mat-label>
                                            <input matInput name="repeatedPassword" type="password" formControlName="repeatedPassword" />
                                        </mat-form-field>
                                    </div>
                                    <div class="col-12 text-left">
                                        <mat-hint *ngIf="form.get('passwordZone').hasError('passwordsNotMatche')" style="color:red">* Password Didn't match</mat-hint>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Email</mat-label>
                                            <input matInput name="email" formControlName="email" />
                                            <mat-hint *ngIf="form.get('email').hasError('required')" style="color:red">This field is required</mat-hint>
                                            <mat-hint *ngIf="form.get('email').hasError('email')" style="color:red">Enter a valid email</mat-hint>
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Full name</mat-label>
                                            <input matInput name="name" formControlName="name" />
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Image</mat-label>
                                            <input matInput name="image" formControlName="image" />
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field appearance="outline" class="example-full-width">
                                            <mat-label>Choose a date</mat-label>
                                            <input matInput name="birthday" [matDatepicker]="picker" formControlName="birthday">
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                          </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12" style="text-align: left">
                                        Gender<br />
                                        <mat-radio-group aria-label="Gender" name="gender" formControlName="gender">
                                            <mat-radio-button value="MALE">MALE</mat-radio-button> &nbsp; 
                                            <mat-radio-button value="FEMALE">FEMALE</mat-radio-button>
                                          </mat-radio-group>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6">
                                        <button [disabled]="submitLoading | async" mat-raised-button class="example-full-width" color="primary">Register</button>
                                        <div class="p-2" *ngIf="submitLoading | async">
                                            <mat-spinner color="primary" diameter="30" style="vertical-align:middle; display: inline-block"></mat-spinner> Loading.......
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </mat-card>
            </div>
        </div>
    </div>
</div>
